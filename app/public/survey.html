<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey Questions</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>
</head>

<body>

    <div class="container">
        <h1>Survey Questions</h1>
        <br>

        <form role="form">

            <div class="form-group">
                <label for="user-name">Name(Required)</label>
                <input type="text" class="form-control" id="user-name">
            </div>

            <div class="form-group">
                <label for="image-link">Link to Photo Image (Required)</label>
                <input type="text" class="form-control" id="image-link">
            </div>

            <h4>You love to go on long hikes with friends.</h4>
            <select class="custom-select" id="questionOne">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You like a quiet casual evening chatting with a few core friends.</h4>
            <select class="custom-select" id="questionTwo">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You love to go to large parties to meet new people.</h4>
            <select class="custom-select" id="questionThree">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You like playing board games and making horrible pun jokes with friends.</h4>
            <select class="custom-select" id="questionFour">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You enjoy walking around neighborhood at night with your friends, talking about your innermost thoughts.</h4>
            <select class="custom-select" id="questionFive">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You love to drink with friends, and have a rowdy fun time while buzzed.</h4>
            <select class="custom-select" id="questionSix">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You love sharing the experience of doing new activities with friends.</h4>
            <select class="custom-select" id="questionSeven">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>Your ideal night is LAN parties, couch-potato gaming, VR gaming, and Magic the Gathering with your crew.</h4>
            <select class="custom-select" id="questionEight">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You can only take hanging out so often, and need time alone to recharge.</h4>
            <select class="custom-select" id="questionNine">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>

            <h4>You are always up for a good hangout, whatever that means in your book.</h4>
            <select class="custom-select" id="questionTen">
                <option selected>Select an option</option>
                <option value="1">1 (Strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3 (Neutral)</option>
                <option value="4">4</option>
                <option value="5">5 (Strong agree) </option>
            </select>
            <br>
            <br>
            <button type="submit" class="btn btn-primary submit" data-toggle="modal" data-target="#matchModal">Submit</button>
        </form>
    </div>

    <div class="container">
        <hr>
        <p>
            <a href="./home.html">Home Link</a> |
            <a href="/api/friends">Friend Match List</a> |
            <a href="https://github.com/chenfanlimc/friendFinder">Github Repo Link</a>
        </p>
    </div>

    <div class="modal" id="matchModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Friend Match Result</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    ...
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

    </div>

</body>

</html>

<script type="text/javascript">

    $(".submit").on("click", function (event) {
        event.preventDefault();
        var results = {
            name: $("#user-name").val().trim(),
            image: $("#image-link").val().trim(),
            scores: [
                $("#questionOne").val().trim(),
                $("#questionTwo").val().trim(),
                $("#questionThree").val().trim(),
                $("#questionFour").val().trim(),
                $("#questionFive").val().trim(),
                $("#questionSix").val().trim(),
                $("#questionSeven").val().trim(),
                $("#questionEight").val().trim(),
                $("#questionNine").val().trim(),
                $("#questionTen").val().trim()
            ]
        }
        $.post("/api/friends", results, function (data) {

            console.log("Survey submitted.");
            console.log(data);
            var message = "<p>You're matched with " + data.name + "! Congratulations. </p>"
            var picture = "\n<img src= " + data.photo + " style='width:100%;'>"
            $(".modal-body")[0].innerHTML = message + picture;

            $("#questionOne").val("");
            $("#questionTwo").val("");
            $("#questionThree").val("");
            $("#questionFour").val("");
            $("#questionFive").val("");
            $("#questionSix").val("");
            $("#questionSeven").val("");
            $("#questionEight").val("");
            $("#questionNine").val("");
            $("#questionTen").val("");
        })
    })

</script>